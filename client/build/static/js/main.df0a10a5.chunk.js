(this.webpackJsonpplaylist_analyst=this.webpackJsonpplaylist_analyst||[]).push([[0],{346:function(t,e,a){},347:function(t,e,a){},795:function(t,e){},803:function(t,e,a){},804:function(t,e,a){},805:function(t,e,a){"use strict";a.r(e);var i=a(0),r=a.n(i),n=a(38),c=a.n(n),s=(a(346),a(845)),o=a(847),l=(a(347),a.p+"static/media/Logo.8e2da956.png"),d=a(12);var u=function(){return Object(d.jsx)("div",{className:"loginParent",children:Object(d.jsx)(s.a,{className:"loginCard",children:Object(d.jsx)("div",{className:"loginCarddiv",children:Object(d.jsxs)("div",{className:"cardContent",children:[Object(d.jsx)("img",{src:l,style:{height:"80px"}}),Object(d.jsxs)("div",{className:"loginPageText",children:["Welcome to the Playlist Analyst ",Object(d.jsx)("br",{})," Log in with Spotify to analyze any of your playlists, and get breakdowns of the artists, genres, moods and many more. This thing is in CLOSED ALPHA BRO!!! Meaning it's ver unfinished. If you even know about the existence of this it's cus you're a very special person. Su out."]}),Object(d.jsx)("a",{href:"https://accounts.spotify.com/authorize?client_id=a3296c7d32264744a2a198e3ef62a255&response_type=code&redirect_uri=https://playlist-analyst.herokuapp.com&scope=user-top-read%20playlist-read-private%20user-read-private%20user-library-read%20playlist-read-collaborative",children:Object(d.jsx)(o.a,{className:"btn-login",children:"Login with Spotify"})})]})})})})},h=(a(349),a(282),a(806),a(145)),b=function(t){var e=t.artistCounts,a=t.albumCounts,i=t.tagCounts;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"chartone",style:{height:200},children:Object(d.jsx)(h.a,{data:e,margin:{top:40,right:80,bottom:80,left:80},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},defs:[{id:"dots",type:"patternDots",background:"inherit",color:"rgba(255, 255, 255, 0.3)",size:4,padding:1,stagger:!0},{id:"lines",type:"patternLines",background:"inherit",color:"rgba(255, 255, 255, 0.3)",rotation:-45,lineWidth:6,spacing:10}],fill:[{match:{id:"ruby"},id:"dots"},{match:{id:"c"},id:"dots"},{match:{id:"go"},id:"dots"},{match:{id:"python"},id:"dots"},{match:{id:"scala"},id:"lines"},{match:{id:"lisp"},id:"lines"},{match:{id:"elixir"},id:"lines"},{match:{id:"javascript"},id:"lines"}],legends:[{anchor:"bottom",direction:"row",justify:!1,translateX:0,translateY:56,itemsSpacing:0,itemWidth:100,itemHeight:18,itemTextColor:"#999",itemDirection:"left-to-right",itemOpacity:1,symbolSize:18,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}]}]})}),Object(d.jsx)("div",{className:"chartone",style:{height:200},children:Object(d.jsx)(h.a,{data:a,margin:{top:40,right:80,bottom:80,left:80},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},defs:[{id:"dots",type:"patternDots",background:"inherit",color:"rgba(255, 255, 255, 0.3)",size:4,padding:1,stagger:!0},{id:"lines",type:"patternLines",background:"inherit",color:"rgba(255, 255, 255, 0.3)",rotation:-45,lineWidth:6,spacing:10}],fill:[{match:{id:"ruby"},id:"dots"},{match:{id:"c"},id:"dots"},{match:{id:"go"},id:"dots"},{match:{id:"python"},id:"dots"},{match:{id:"scala"},id:"lines"},{match:{id:"lisp"},id:"lines"},{match:{id:"elixir"},id:"lines"},{match:{id:"javascript"},id:"lines"}],legends:[{anchor:"bottom",direction:"row",justify:!1,translateX:0,translateY:56,itemsSpacing:0,itemWidth:100,itemHeight:18,itemTextColor:"#999",itemDirection:"left-to-right",itemOpacity:1,symbolSize:18,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}]}]})}),Object(d.jsx)("div",{className:"chartone",style:{height:200},children:Object(d.jsx)(h.a,{data:i,margin:{top:40,right:80,bottom:80,left:80},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},defs:[{id:"dots",type:"patternDots",background:"inherit",color:"rgba(255, 255, 255, 0.3)",size:4,padding:1,stagger:!0},{id:"lines",type:"patternLines",background:"inherit",color:"rgba(255, 255, 255, 0.3)",rotation:-45,lineWidth:6,spacing:10}],fill:[{match:{id:"ruby"},id:"dots"},{match:{id:"c"},id:"dots"},{match:{id:"go"},id:"dots"},{match:{id:"python"},id:"dots"},{match:{id:"scala"},id:"lines"},{match:{id:"lisp"},id:"lines"},{match:{id:"elixir"},id:"lines"},{match:{id:"javascript"},id:"lines"}],legends:[{anchor:"bottom",direction:"row",justify:!1,translateX:0,translateY:56,itemsSpacing:0,itemWidth:100,itemHeight:18,itemTextColor:"#999",itemDirection:"left-to-right",itemOpacity:1,symbolSize:18,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}]}]})})]})},m=a(15),f=a(111),p=a.n(f);var g=a(140),j=a.n(g),O=a(24),y=a.n(O),v=a(59);a(803);function k(t){var e=t.playlist,a=t.getArtistCounts,r=t.getAlbumCounts,n=t.getTagCounts,c=(t.showHide,Object(i.useState)([])),o=Object(m.a)(c,2),l=o[0],u=o[1],h=Object(i.useState)(!1),b=Object(m.a)(h,2),f=b[0],g=b[1],O=Object(i.useState)(!1),k=Object(m.a)(O,2),x=(k[0],k[1],new j.a({clientId:"a3296c7d32264744a2a198e3ef62a255"})),C=localStorage.getItem("access");x.setAccessToken(C);var L=[],S=[],w=[],T=function(){var t=Object(v.a)(y.a.mark((function t(){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("access"),x.setAccessToken(a),a){t.next=4;break}return t.abrupt("return");case 4:g(!f),x.getPlaylistTracks(e.id).then((function(t){var e=t.body.items.map(function(){var t=Object(v.a)(y.a.mark((function t(e){var a,i;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(){var t=Object(v.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p.a.get("http://ws.audioscrobbler.com/2.0/?method=track.gettoptags&artist="+encodeURIComponent(e.track.album.artists[0].name)+"&track="+encodeURIComponent(e.track.name)+"&autocorrect=1&api_key=205d2d20915ccacfdfd4e08c2a394872&format=json").then((function(t){return t.data.toptags.tag[0].name})).catch((function(t){return"No tags found"})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,a();case 3:return i=t.sent,t.abrupt("return",{name:e.track.name,album:e.track.album.name,artist:e.track.album.artists[0].name,artistID:e.track.album.artists[0].id,id:e.track.id,tag:i});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());Promise.all(e).then((function(t){u(t)}))}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(i.useEffect)((function(){var t=l.reduce((function(t,e){var a=e.artist;return t[a]=(t[a]||0)+1,t}),{});console.log(t),A(t);var e=l.reduce((function(t,e){var a=e.album;return t[a]=(t[a]||0)+1,t}),{});console.log(e),N(e);var a=l.reduce((function(t,e){var a=e.tag;return t[a]=(t[a]||0)+1,t}),{});I(a),console.log(a)}),[l]);var A=function(t){for(var e=0,i=Object.entries(t);e<i.length;e++){var r=Object(m.a)(i[e],2),n=r[0],c=r[1];L.push({id:n,value:c})}a(L)},N=function(t){for(var e=0,a=Object.entries(t);e<a.length;e++){var i=Object(m.a)(a[e],2),n=i[0],c=i[1];S.push({id:n,value:c})}r(S)},I=function(t){for(var e=0,a=Object.entries(t);e<a.length;e++){var i=Object(m.a)(a[e],2),r=i[0],c=i[1];w.push({id:r,value:c})}n(w),console.log(w)};return Object(d.jsx)("div",{className:"playlistCardContainer",children:Object(d.jsxs)(s.a,{className:"playlistContainer float-left",onClick:T,children:[e.name,Object(d.jsxs)("div",{className:"lightweight",children:[e.trackNum," tracks"]})]})})}a(804);function x(t){var e=t.code,a=function(t){var e=Object(i.useState)(),a=Object(m.a)(e,2),r=a[0],n=a[1],c=Object(i.useState)(),s=Object(m.a)(c,2),o=s[0],l=s[1],d=Object(i.useState)(),u=Object(m.a)(d,2),h=u[0],b=u[1];return Object(i.useEffect)((function(){p.a.post("http://localhost:3001/login",{code:t}).then((function(t){n(t.data.accessToken),l(t.data.refreshToken),b(t.data.expiresIn),window.history.pushState({},null,"/")}))}),[t]),Object(i.useEffect)((function(){if(o&&h){var t=setInterval((function(){p.a.post("http://localhost:3001/refresh",{refreshToken:o}).then((function(t){n(t.data.accessToken),b(t.data.expiresIn)})).catch((function(){window.location="/"}))}),1e3*(h-60));return function(){return clearInterval(t)}}}),[o,h]),r}(e),r=Object(i.useState)(["emptyarray"]),n=Object(m.a)(r,2),c=n[0],s=n[1],o=Object(i.useState)(!1),l=Object(m.a)(o,2),u=l[0],h=l[1];localStorage.setItem("access",a);var f=new j.a({clientId:"a3296c7d32264744a2a198e3ef62a255"}),g=Object(i.useState)([]),O=Object(m.a)(g,2),y=O[0],v=O[1],x=Object(i.useState)([]),C=Object(m.a)(x,2),L=C[0],S=C[1],w=Object(i.useState)([]),T=Object(m.a)(w,2),A=T[0],N=T[1];Object(i.useRef)(!0);Object(i.useEffect)((function(){a&&f.setAccessToken(a)}),[a]),Object(i.useEffect)((function(){a&&f.getUserPlaylists().then((function(t){s(t.body.items.map((function(t){return{name:t.name,id:t.id,url:t.href,trackNum:t.tracks.total}})))}))}),[a]);var I=function(){h(!0)};return Object(d.jsxs)("div",{className:"parent",children:["Select a playlist to analyze",c.map((function(t){return Object(d.jsx)("div",{className:"listCard",onClick:I,children:Object(d.jsx)(k,{playlist:t,code:e,getArtistCounts:v,getAlbumCounts:S,getTagCounts:N,showHide:u},t.id)})})),u?Object(d.jsx)(b,{artistCounts:y,albumCounts:L,tagCounts:A}):null]})}var C=new URLSearchParams(window.location.search).get("code");var L=function(){return C?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(x,{code:C})}):Object(d.jsx)(u,{})};c.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(L,{})}),document.getElementById("root"))}},[[805,1,2]]]);
//# sourceMappingURL=main.df0a10a5.chunk.js.map